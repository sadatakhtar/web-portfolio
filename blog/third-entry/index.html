<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <link rel="stylesheet" href="/web-portfolio/main.css" >
    <title>Third Entry | Web portfolio</title>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMenu">
                <span class="navbar-toggler-icon"></span>
            </button>
                <div class="collapse navbar-collapse" id="navbarMenu">
                    <ul class="navbar-nav">
                        <li><a class="nav-link" href="/">Home</a></li>
                        <li><a class="nav-link active" href="/blog">Blog</a></li>
                        <li><a class="nav-link" href="/projects">Projects</a></li>
                        <li><a class="nav-link"  href="/contact">Contact</a></li>
                    </ul>

                </div>
        </div>
    </nav>
    <div class="container">
        <h1 class="title" >Grub Bootloader Recovery</h1>
        <p>April 29, 2020</p>
        <hr>
        <img src="grub-repair.png" alt="picture of grub repair width="500px" height="300px">
        <br>
        <br>
        <br>
        <p>Today I upgraded my operating system on my desktop which was running Ubuntu 18.04 to Ubuntu 20.04. 
            In the process of a simple upgrade I accidentally overwrote my grub bootloader(dual boot) and 
            got locked out of my machine.

            In order to restore my grub bootloader I had to first research online on the correct forums and 
            after some pain staking detective work I managed to find some solutions.The first thing I had 
            to do was to enter the following commands at the grub prompt:-
        </p>
        <ul>
            <li>Sudo fdisk -l                     --to list all the different partitions on my desktop.</li>
            <li>Sudo blkid                        --This command also lists the partition in /dev/sda order.</li>
            <li>ls (hd1,msdos5)/boot/grub         --listing the exact path to grub files.</li>
            <li>Set prefix=(hd1,msdos5)/boot/grub --setting the prefix to exact partition.</li>
            <li>Set boot=(hd1,msdos5)             --sets the appropriate boot to load from.</li>
            <li>Insmod normal                     --inserting mod to normal.</li>
            <li>Normal                            -- to restore the grub bootloader menu.</li>

        </ul>

        <p>The next step I had to take was to first create an Ubuntu live usb(iso). 
            Once the live USB was created I had to change my desktop Bios boot setting to boot 
            the USB on startup which was another task that resulted in me searching numerous online forums.
            Once the boot sequence was set I had to boot via USB.
        </p>
        <p>Next was to select “Try Ubuntu without installing”. Once in the main menu then I had to 
            locate the terminal and find a file called 40cdrom and remove it from its location in 
            the /usr/lib/apt-setup/ubiquity/generator folder in the command line.
        </p>
        <img src="grub2-in-ubuntu.jpg" alt="picture of the grub bootloader width="500px" height="300px">
        
        <p>After this followed the next commands:</p>
        <ul>
            <li>Sudo mount /dev/sda? /mnt</li>
            <li>Sudo mount /proc /mnt/proc</li>
            <li>Sudo mount /sys /mnt/sys</li>
            <li>Sudo grub-install --boot-directory=/dev/sd?</li>
        </ul>

        <p>The above commands simply mount the partitions and repair the grub folder.</p>
        <p>
            Finally I achieved the task of restoring my grub bootloader and had the latest version of 
            Ubuntu running on my desktop. In the process of finding the solution to my problem I managed 
            to extend my knowledge in (Terminal)command line arguments.
        </p>
    </div>
     <script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
     <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
     <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
   
    
</body>
</html>